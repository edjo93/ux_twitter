(this.webpackJsonpux_twitter=this.webpackJsonpux_twitter||[]).push([[0],{24:function(e,t,a){},40:function(e,t,a){e.exports=a(62)},45:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(37),o=a.n(c),l=(a(45),a(16)),s=a(17),i=a(23),u=a(22),m=(a(46),a(24),a(7)),d=a.n(m),p=a(13),h=a(15),b=a.n(h),f=(a(56),a(57),b.a.initializeApp({apiKey:"AIzaSyA4azd3C3FFb9ljA3nHY0HQbcw3UsBRsCM",authDomain:"twitter-5ccd4.firebaseapp.com",databaseURL:"https://twitter-5ccd4.firebaseio.com",projectId:"twitter-5ccd4",storageBucket:"twitter-5ccd4.appspot.com",messagingSenderId:"981584347786",appId:"1:981584347786:web:6808a314b875af36852373",measurementId:"G-D50T5573VB"})),E=f.firestore(),g=f.storage(),v=f,w=a(8),j=a(3),O=function(e){var t=Object(j.g)(),a=Object(n.useState)(""),c=Object(w.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(""),i=Object(w.a)(s,2),u=i[0],m=i[1];var d=function(e){var t=e.target,a=t.name,n=t.value;"email"===a?l(n):m(n)};return r.a.createElement("div",{class:"form-group align-items-center login"},r.a.createElement("div",{class:"card-panel"},r.a.createElement("h1",null,"Ingrese sus datos:"),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"usr"},"Email:"),r.a.createElement("input",{type:"text",name:"email",class:"form-control",id:"usr",onChange:d,value:o})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"pwd"},"Contrase\xf1a:"),r.a.createElement("input",{type:"password",name:"password",class:"form-control",id:"pwd",onChange:d,value:u})),r.a.createElement("div",{class:"row form-group"},r.a.createElement("button",{type:"button",class:"btn btn-primary",onClick:function(e){e.preventDefault(),v.auth().signInWithEmailAndPassword(o,u).then((function(e){console.log(e),t.push("/")})).catch((function(t){console.log(e)}))},to:"/home"},"Login")),r.a.createElement("div",{class:"row"},r.a.createElement("button",{type:"button",class:"btn btn-primary",onClick:function(){t.push("/signup")}},"Signup"))))},y=a(14),k=a(2),C=a(28),x=function(e){var t=Object(j.g)();return r.a.createElement("div",{class:"row"},r.a.createElement("div",{style:{color:"#000"},onClick:function(){return t.push("/".concat(e.tag))}},r.a.createElement("div",{class:"col-sm-6"},r.a.createElement("img",{src:e.profilepic,alt:"",id:"img",className:"img img-tweet"})),r.a.createElement("div",{class:"col-sm-6"},r.a.createElement("b",null,e.name),r.a.createElement("h6",null,"@",e.tag))))},S=function(e){return r.a.createElement("div",null,e.users.map((function(e,t){return r.a.createElement(x,{key:"user-".concat(t),name:e.name,tag:e.username})})))},A=function(){var e,t=Object(n.useState)({search:""}),a=Object(w.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),s=Object(w.a)(l,2),i=s[0],u=s[1],m=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.length>0&&void 0!==a[0]?a[0]:c.search,v.auth().onAuthStateChanged((function(e){e&&""!==t&&E.collection("users").where("name",">=",t).where("name","<=",t+"\uf8ff").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(k.a)(Object(k.a)({},e.data()),{},{id:e.id}))})),u(t)}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{class:"form-inline my-6 my-lg-6"},r.a.createElement("div",null,r.a.createElement("input",{autoComplete:"off",class:"form-control mr-sm-2",type:"seach",placeholder:"Search","aria-label":"Search",id:"search",name:"search","data-toggle":"popover",title:"Test pop","data-content":"pepega",onChange:function(t){clearTimeout(e);var a=t.target,n=a.name,r=a.value;o(Object(k.a)(Object(k.a)({},c),{},Object(y.a)({},n,r))),e=setTimeout((function(){return m(r)}),1e3)},value:c.search}))),0!==i.length&&r.a.createElement(S,{users:i}))},D=function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.auth().signOut().catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("nav",{class:"navbar navbar-expand-md navbar-light bg-light fixed-top"},r.a.createElement("a",{class:"navbar-brand",href:"#"},"Twitter"),r.a.createElement("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarsExampleDefault","aria-controls":"navbarsExampleDefault","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{class:"navbar-toggler-icon"})),r.a.createElement("div",{class:"collapse navbar-collapse",id:"navbarsExampleDefault"},r.a.createElement("ul",{class:"navbar-nav mr-auto"},r.a.createElement("li",{class:"nav-item active"},r.a.createElement("a",{class:"nav-link",href:"#"},"Home",r.a.createElement("span",{class:"sr-only"},"(current)"))),r.a.createElement("li",{class:"nav-item active"},r.a.createElement("a",{class:"nav-link",onClick:e},"Logout ",r.a.createElement("span",{class:"sr-only"},"(current)")))),r.a.createElement(A,null)))},M=function(e){var t=e.removable,a="";v.auth().onAuthStateChanged((function(e){e&&E.collection("users").where("email","==",e.email).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(k.a)(Object(k.a)({},e.data()),{},{id:e.id}))})),a=t[0].id}))}));var n=function(){var e=b.a.firestore(),t=b.a.firestore.FieldValue.increment(-1);e.collection("users").doc(a).update({numTweets:t})};return r.a.createElement("div",{class:"row component text-left"},r.a.createElement("div",{class:"col-lg-2 col-sm-2"},r.a.createElement("img",{src:e.profilepic,alt:"",id:"img",className:"img img-tweet"})),r.a.createElement("div",{class:"col-lg-10 col-sm-10"},r.a.createElement("b",null,e.name)," @",e.username,t&&r.a.createElement("div",{class:"btn-group",style:{float:"right"}},r.a.createElement("button",{class:"btn btn-secondary btn-sm dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}),r.a.createElement("div",{class:"dropdown-menu"},r.a.createElement("button",{onClick:function(t){E.collection("tweets").doc(e.id).delete().then((function(){console.log("Eliminado"),n()})).catch((function(e){console.log(e)}))}},"Delete Tweet"))),r.a.createElement("div",{class:"tweet-content"},e.content,r.a.createElement("div",null,r.a.createElement("small",{class:"blue-text"},e.hashtags)))))},T=function(e){var t=e.username,a=Object(n.useState)([]),c=Object(w.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(!1),i=Object(w.a)(s,2),u=i[0],m=i[1];Object(n.useEffect)((function(){d()}),[t]);var d=function(){v.auth().onAuthStateChanged((function(t){t?E.collection("users").where("username","==",e.username).onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(Object(k.a)(Object(k.a)({},e.data()),{},{id:e.id}))})),m(t.email===a[0].email),E.collection("tweets").where("usuario","==",a[0].email).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(k.a)(Object(k.a)({},e.data()),{},{id:e.id}))})),l(t)}))})):E.collection("users").where("username","==",e.username).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(k.a)(Object(k.a)({},e.data()),{},{id:e.id}))})),E.collection("tweets").where("usuario","==",t[0].email).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(k.a)(Object(k.a)({},e.data()),{},{id:e.id}))})),l(t)}))}))}))};return r.a.createElement("div",null,o.map((function(t,a){return r.a.createElement(M,{removable:u,key:"tweet-".concat(a),name:e.name,username:e.username,content:t.contenido,hashtags:t.hashtags,id:t.id,profilepic:e.profilepic})})),";")},F=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={contenido:"",hashtags:"",usuario:"",user:{}},n.manejarEntrada=n.manejarEntrada.bind(Object(C.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.authListener()}},{key:"authListener",value:function(){var e=this;v.auth().onAuthStateChanged((function(t){t?E.collection("users").where("email","==",t.email).onSnapshot((function(t){var a=[];t.forEach((function(e){a.push(Object(k.a)(Object(k.a)({},e.data()),{},{id:e.id}))})),e.setState(Object(k.a)(Object(k.a)({},e.state),{},{user:a[0]})),console.log(a[0].name)})):console.log("No autenticado")}))}},{key:"manejarEntrada",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(y.a)({},a,n))}},{key:"render",value:function(){var e=this,t=function(){var t=Object(p.a)(d.a.mark((function t(){var n,r,c,o,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.state.usuario=e.state.user.email,n=e.state,r=n.contenido,c=n.hashtags,o=n.user,l={contenido:r,hashtags:c,usuario:o.email,time:new Date},t.next=5,E.collection("tweets").doc().set(l);case 5:a();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(){var t=b.a.firestore(),a=b.a.firestore.FieldValue.increment(1);t.collection("users").doc(e.state.user.id).update({numTweets:a})};return r.a.createElement("div",null,r.a.createElement(D,null),r.a.createElement("main",{role:"main",class:"container"},r.a.createElement("div",{class:"starter-template"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-lg-4"},r.a.createElement("div",{class:"card black-text"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col col-lg-4"},r.a.createElement("img",{src:this.state.user.profilepic,alt:"",id:"img",className:"img img-profile"})),r.a.createElement("div",{class:"col col-lg-8"},r.a.createElement("h4",null,this.state.user.name),r.a.createElement("div",{id:"div-usuarioactual",class:"blue-text"},r.a.createElement("h5",null,"@",this.state.user.username)),r.a.createElement("h6",null,"Tweets: ",this.state.user.numTweets))))),r.a.createElement("div",{class:"col-lg-8"},r.a.createElement("div",{class:"component  text-left"},r.a.createElement("textarea",{class:"form-control",value:this.state.contenido,name:"contenido",onChange:this.manejarEntrada,placeholder:"What's happening",id:"txt-texto"}),r.a.createElement("input",{type:"text",class:"form-control hashtags-input",value:this.state.hashtags,name:"hashtags",onChange:this.manejarEntrada,placeholder:"Hashtags",id:"txt-hash"}),r.a.createElement("button",{type:"button",onClick:t,class:"btn btn-primary",id:"btn-nuevo"},"Tweet")),!!this.state.user.name&&r.a.createElement("div",{id:"div-tweets"},r.a.createElement(T,{name:this.state.user.name,username:this.state.user.username,profilepic:this.state.user.profilepic})))))))}}]),a}(n.Component),I=function(e){return r.a.createElement("div",{class:"alert alert-danger"},e.message)},L=function(){for(var e=Object(j.g)(),t=[],a=[],c=Object(n.useState)(!1),o=Object(w.a)(c,2),l=o[0],s=o[1],i=Object(n.useState)(!1),u=Object(w.a)(i,2),m=u[0],h=u[1],b=Object(n.useState)(),f=Object(w.a)(b,2),O=f[0],C=f[1],x="Ingrese una contrase\xf1a con mas de 7 caracteres",S="Ingrese un correo valido",A=Object(n.useState)({email:"",password:"",username:"",name:"",month:"Enero",year:"2001",day:"1",numTweets:0,profilepic:"https://firebasestorage.googleapis.com/v0/b/twitter-5ccd4.appspot.com/o/images%2F240_F_64678017_zUpiZFjj04cnLri7oADnyMH0XBYyQghG.jpg?alt=media&token=2cb8a585-e043-44a8-bce4-e3b14422c06d"}),D=Object(w.a)(A,2),M=D[0],T=D[1],F=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("inicia"),a=g.ref("images/".concat(O.name)).put(O),console.log("storage"),a.on("state_changed",(function(e){}),(function(e){}),Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.ref("images").child(O.name).getDownloadURL().then((function(e){t=e;var a={email:M.email,username:M.username,name:M.name,month:M.month,year:M.year,day:M.day,numTweets:M.numTweets,profilepic:t};E.collection("users").doc().set(a)}));case 1:case"end":return e.stop()}}),e)})))),console.log(t),console.log("nuevo tweet agregado");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){var t=e.target,a=t.name,n=t.value;T(Object(k.a)(Object(k.a)({},M),{},Object(y.a)({},a,n))),console.log(O)},N=function(e){var t=e.target.name.split("-"),a=Object(w.a)(t,2),n=a[0],r=a[1];T(Object(k.a)(Object(k.a)({},M),{},Object(y.a)({},n,r)))},U=function(e){var t=e.target.files[0];T(Object(k.a)(Object(k.a)({},M),{},Object(y.a)({},"profilepic",URL.createObjectURL(t))))},z=1;z<=31;z++)t.push(r.a.createElement("button",{class:"dropdown-item",type:"button",onClick:N,name:"day-".concat(z)},z));for(var B=2001;B>=1970;B--)a.push(r.a.createElement("button",{class:"dropdown-item",type:"button",onClick:N,name:"year-".concat(B)},B));return r.a.createElement("div",{class:"form-group align-items-center login"},r.a.createElement("div",{class:"card-panel"},r.a.createElement("h1",null,"Crea tu cuenta"),r.a.createElement("h3",null,"Ingrese sus Datos:"),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"usr"},"Email:"),r.a.createElement("input",{type:"text",name:"email",class:"form-control",id:"usr",onChange:L,value:M.email})),m?r.a.createElement(I,{message:S}):null,r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"name"},"Contrase\xf1a:"),r.a.createElement("input",{type:"password",name:"password",class:"form-control",id:"password",onChange:L,value:M.password})),l?r.a.createElement(I,{message:x}):null,r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"name"},"Nombre:"),r.a.createElement("input",{type:"text",name:"name",class:"form-control",id:"name",onChange:L,value:M.name})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"name"},"Nombre de Usuario:"),r.a.createElement("input",{type:"text",name:"username",class:"form-control",id:"username",onChange:L,value:M.username})),r.a.createElement("div",{class:"form-group"},r.a.createElement("p",null,"Ingrese su fecha de nacimiento"),r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-sm-4"},r.a.createElement("p",null,"A\xf1o"),r.a.createElement("div",{class:"dropup"},r.a.createElement("button",{class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenu3","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",title:"asd"},M.year),r.a.createElement("div",{class:"dropdown-menu","aria-labelledby":"dropdownMenu3"},a))),r.a.createElement("div",{class:"col-sm-4"},r.a.createElement("p",null,"Mes"),r.a.createElement("div",{class:"dropup"},r.a.createElement("button",{class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenu3","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",title:"asd"},M.month),r.a.createElement("div",{class:"dropdown-menu","aria-labelledby":"dropdownMenu3"},r.a.createElement("button",{class:"dropdown-item",type:"button",onClick:N,name:"month-Diciembre"},"Diciembre"),r.a.createElement("button",{class:"dropdown-item",type:"button",onClick:N,name:"month-Noviembre"},"Noviembre"),r.a.createElement("button",{class:"dropdown-item",type:"button",onClick:N,name:"month-Octubre"},"Octubre"),r.a.createElement("button",{class:"dropdown-item",type:"button",onClick:N,name:"month-Septiembre"},"Septiembre"),r.a.createElement("button",{class:"dropdown-item",type:"button",onClick:N,name:"month-Agosto"},"Agosto"),r.a.createElement("button",{class:"dropdown-item",type:"button",onClick:N,name:"month-Mayo"},"Mayo"),r.a.createElement("button",{class:"dropdown-item",type:"button",onClick:N,name:"month-Julio"},"Julio"),r.a.createElement("button",{class:"dropdown-item",type:"button",onClick:N,name:"month-Junio"},"Junio"),r.a.createElement("button",{class:"dropdown-item",type:"button",onClick:N,name:"month-Abril"},"Abril"),r.a.createElement("button",{class:"dropdown-item",type:"button",onClick:N,name:"month-Marzo"},"Marzo"),r.a.createElement("button",{class:"dropdown-item",type:"button",onClick:N,name:"month-Febrero"},"Febrero"),r.a.createElement("button",{class:"dropdown-item",type:"button",onClick:N,name:"month-Enero"},"Enero")))),r.a.createElement("div",{class:"col-sm-4"},r.a.createElement("p",null,"D\xeda"),r.a.createElement("div",{class:"dropup"},r.a.createElement("button",{class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenu4","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},M.day),r.a.createElement("div",{class:"dropdown-menu ","aria-labelledby":"dropdownMenu4"},t))))),r.a.createElement("form",null,r.a.createElement("p",null,"Eliga una foto de perfil:"),r.a.createElement("div",{className:"img-holder"},r.a.createElement("img",{src:M.profilepic,alt:"",id:"img",className:"img img-select"})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"exampleFormControlFile1"},"Profile Picture"),r.a.createElement("input",{type:"file",class:"form-control-file",id:"exampleFormControlFile1",name:"imgfile",onChange:function(e){if(e.target.files[0]){console.log(e.target.files[0]);var t=e.target.files[0];C(t)}U(e)}}))),r.a.createElement("form",null,r.a.createElement("div",{class:"row"},r.a.createElement("button",{type:"button",class:"btn btn-primary",onClick:function(t){t.preventDefault(),F(),s(!1),h(!1),v.auth().createUserWithEmailAndPassword(M.email,M.password).then((function(t){delete M.password,e.push("/login")})).catch((function(e){"auth/weak-password"===e.code?s(!0):"auth/invalid-email"===e.code&&h(!0)}))}},"Signup")))))},N=a(20),U=a(39),z=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={user:{}},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.authListener()}},{key:"authListener",value:function(){var e=this;v.auth().onAuthStateChanged((function(t){t?e.setState({user:t}):e.setState({user:null})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.component,n=Object(U.a)(t,["component"]);return r.a.createElement(j.b,Object.assign({},n,{render:function(t){return e.state.user?r.a.createElement(a,t):r.a.createElement(j.a,{to:"/login"})}}))}}]),a}(n.Component),B=function(e){var t=Object(j.h)().userId,a=Object(n.useState)({}),c=Object(w.a)(a,2),o=c[0],l=c[1];Object(n.useEffect)((function(){s()}),[t]);var s=function(){E.collection("users").where("username","==",t).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(k.a)(Object(k.a)({},e.data()),{},{id:e.id}))})),l(t[0])}))};return r.a.createElement("div",null,r.a.createElement(D,null),r.a.createElement("main",{role:"main",class:"container"},r.a.createElement("div",{class:"starter-template"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-lg-4"},r.a.createElement("div",{class:"col-lg-12"},r.a.createElement("div",{class:"card black-text"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col col-lg-4 col-md-6"},r.a.createElement("img",{src:o.profilepic,alt:"",id:"img",className:"img img-profile"})),r.a.createElement("div",{class:"col col-lg-8 col-md-6"},r.a.createElement("h4",null,o.name||""),r.a.createElement("div",{id:"div-usuarioactual",class:"blue-text"},r.a.createElement("h5",null,"@",o.username||"")),r.a.createElement("h6",null,"Tweets: ",o.numTweets||"")))))),!!o.name&&r.a.createElement("div",{class:"col-lg-8"},r.a.createElement("div",{id:"div-tweets"},r.a.createElement(T,{name:o.name,username:o.username,profilepic:o.profilepic})))))))},J=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={user:{}},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.authListener()}},{key:"authListener",value:function(){var e=this;v.auth().onAuthStateChanged((function(t){t?e.setState({user:t}):e.setState({user:null})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.a,{basename:"/"},r.a.createElement(j.d,null,r.a.createElement(j.a,{exact:!0,path:"/",to:"/home"}),r.a.createElement(j.b,{path:"/login",component:O}),r.a.createElement(j.b,{path:"/signup",component:L}),r.a.createElement(z,{path:"/home",exact:!0,component:F}),r.a.createElement(j.b,{path:"/:userId",component:B}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.d780b29a.chunk.js.map